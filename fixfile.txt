Here is a new fix for your code.